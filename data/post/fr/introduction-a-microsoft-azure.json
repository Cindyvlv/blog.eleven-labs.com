{"date":"2022-02-15T00:00:00.000Z","title":"Introduction à Microsoft Azure","excerpt":"Si vous avez lu Microsoft et que vous n’avez pas fui, bienvenue sur cette introduction à la solution de Cloud Microsoft.","readingTime":"9mn","authors":["gthibault2"],"categories":["architecture"],"content":"\n![Dark Vador Cookie](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/COOKIE.jpg)\n\nSi vous avez lu **“Microsoft”** et que vous n’avez pas fui, bienvenue sur cette\nintroduction à la solution de **Cloud Microsoft** ! Ayant travaillé deux ans sur **Azure**, j’ai eu envie de partager ce que j’avais pu apprendre et livrer mes astuces et mon ressenti sur cet outil.\n\nPour commencer, nous allons voir ce qu’est Azure, puis je donnerai un avis personnel sur la solution et nous finirons sur un premier tutoriel. \n\nToujours présent ? Let’s go ! \n\n## Microsoft Azure, c’est quoi ? \n\n### Les concepts de Microsoft Azure\n\nComme dit plus haut, **Azure** est la **solution Microsoft de cloud**. Il permet l’accès à de nombreux **services hébergés par Microsoft**. Actuellement, on en répertorie une centaine, mais ce nombre augmente rapidement avec les innovations. \n\nBien que cette solution soit principalement utilisée en tant que **cloud public**, Azure permet par l’utilisation d’**Azure Stack** de mettre en place un **cloud privé** et un **cloud hybride**. Cependant, nous n'aborderons que la notion de cloud public dans cet article.\n\n\n> Petit rappel sur les notions de cloud privé, public et hybride :\n>   - Le **cloud public** permet l’accès à différents services via les infrastructures Microsoft. \n>   - Le **cloud privé** permet l’accès à différents services aussi, mais hébergés sur sa propre infrastructure.\n>   - Le **cloud hybride** est un mix des deux.\n\n\nFaire une liste de l’ensemble des services Azure serait long et pas forcément intéressant.\nJe vais donc lister ceux qui me semblent être les plus importants. Ils seront détaillés par la suite dans d’autres articles à venir.\n\nLes **services Microsoft Azure principaux** sont : \n   - Computing (Machines virtuelles, conteneurs, kubernetes, etc.), \n   - Sécurité (Pare-feu, étude des menaces, monitoring, etc.),\n   - Identité (Active directories, etc.),\n   - Réseau (route, dns, gateway, etc.),\n   - Stockage (bases de données, différents types de stockage en fonction des besoins, etc.),\n   - IOT (API, Azure Cosmos DB, etc.)\n\nCependant, si vous souhaitez la **liste exhaustive**, voici le lien vers la page du **site de Microsoft** qui détaille l’ensemble : [Liste des services Azure](https://azure.microsoft.com/fr-fr/services/)\n\nComme beaucoup de solutions cloud, ces services sont hébergés dans différents datacenters, localisés dans différents pays.\n\n### L’écosystème Azure.\n\nAzure est déjà une plate-forme applicative cloud complète, mais elle possède également un **écosystème intéressant**, et notamment : \n\n**Azure DevOps** qui est une **boite à outils pour DevOps** assez complète. Elle permet via une seule interface de : \n  - Gérer des items “agiles” (Epics, User stories, sprint, etc.),\n  - Synchroniser un Github et y avoir accès via l’interface,\n  - Gérer les builds, les artéfacts,\n  - Gérer les pipelines,\n  - Gérer la création et l’application de tests automatisés.\n  \nPour plus d’informations, vous pouvez jeter un œil ici : [Documentation Azure Devops](https://azure.microsoft.com/fr-fr/services/devops/)\n\n**Office365** qui est un service de **gestion de postes utilisateurs** (en terme 'plus barbare', moderne workplace). Il permet la gestion de ce dont un poste Windows doit avoir besoin. Par exemple les mails, les logiciels. \n\n**PowerApps** qui est un outil permettant de créer une application avec peu de code. Il est principalement utilisé pour **automatiser des processus métier**. \n\n## Mon ressenti par rapport à Azure\n\n### Les forces d’Azure\n\nLa **force principale d’Azure** (et ce ne sera pas une surprise), est sa **compatibilité avec les services Microsoft**. En effet, il est **simple** de coupler son infrastructure cloud Azure avec celle que l’on a en local. Il en est de même avec Office365 vu plus haut et qui est un service qui occupe une place importante chez Microsoft.\n\nSa seconde force selon moi est son service Azure DevOps. Il permet la mise en place d’une première démarche DevOps assez facilement, avec une administration simplifiée et un côté graphique qui peut être rassurant. \n\n### Ses faiblesses\n\nLa force principale d’Azure est aussi sa plus grosse faiblesse : le fait qu’il soit aussi bien intégré avec tout ce qui touche à Microsoft et favorise l’accès au service Microsoft peut gêner pour la mise en place de solutions externes. De plus cela crée une dépendance à Microsoft.\n\nLe second mauvais point reste dans le thème. Les **licences Microsoft** sont très/trop compliquées par rapport à ses concurrents directs comme AWS.\n\nMaintenant que la partie théorique est terminée, passons aux choses sérieuses.\n\n## Commençons à l'utiliser\n\n### Accès à une version de test de la plateforme.\n\nMicrosoft fournit un accès pour tester sa solution. Il suffit d'effectuer les étapes suivantes.\n\n1.  Cliquez sur le lien d'accès à la [version de test](https://azure.microsoft.com/fr-fr/free/)\n2. Cliquez sur le bouton encadré en rouge.\n\t  ![Interface free azure](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/FREE.png)\n\t  _**Image 1:** interface d'accès à l'abonnement gratuit_\n4. Connectez-vous via le portail Microsoft. (si vous n’avez pas de compte, créez-en un)\n5. Remplissez le formulaire avec vos informations. À la fin de la procédure, vos informations bancaires vous seront demandées. C’est une sécurité pour éviter de créer plusieurs comptes gratuits. \n\n### Votre première Infrastructure\n\nDans ce chapitre, nous verrons ensemble quelques notions importantes complétées par des exemples concrets. \n\n#### Les bases de l’organisation des ressources\n\nLa compréhension de l'arborescence des ressources sur Azure permet de mieux organiser ses ressources et vous simplifiera la vie pour l'administration et la gestion des coûts.\nNous avons donc : \n  - le groupe de management, qui peut gérer plusieurs abonnements.\n  - l'abonnement qui contient plusieurs groupes de ressources.\n  - les groupes de ressources qui peuvent contenir plusieurs ressources Azure (machines virtuelles, applications…). \n\nVoici un **schéma** qui résume l'ensemble : \n\n![Organisation](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/ORG.png)\n\n#### Votre première machine virtuelle\n\nPour ce premier tutoriel, nous allons  effectuer les étapes suivantes : \n\n   - Vérifier la présence d'un abonnement,\n   - Créer votre premier groupe de ressource,\n   - Créer votre premier Groupes de sécurité réseau,\n   - Créer votre première machine virtuelle,\n   - Tester la connexion,\n   - Supprimer les ressources.\n\nReprenons notre compte fraîchement créé. \n\n##### Vérfier l'abonnement \n\nNous allons commencer par vérifier que nous possédons bien un abonnement.\n\n 1. Dans l'onglet de recherche, entrez 'abonnement' **(1)**\n 2. Selectionnez 'Abonnement' **(2)**\n 3. Vérifiez qu'il est bien présent **(3)**\n\n   ![Abonnement](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/ABO.png)\n  \n##### La création du groupe de ressources\n\nNous avons un abonnement fonctionnel, nous allons ajouter un 'Groupe de ressources' dans laquelle mettre notre machine Virtuelle\n\n 1. Dans l'onglet de recherche, entrez 'Groupe de ressources'  **(1)**\n 2. Selectionnez 'Groupe de ressources' **(2)**\n 3. Cliquez sur 'Créer'  **(3)**\n\n   ![Ressource groupe](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/RG.png)\n\n4. Entrez le nom du groupe **(1)**\n5. Cliquez sur 'Vérifier + Créer' **(2)**\n\n![Ressource group configuration](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/RGC.png)\n\n#####  Groupe de sécurité réseau\n\nNous allons créer et ajouter un Groupe de sécurité réseau. C'est l'équivalant du 'pare-feu' version Azure.\n\n 1. Dans l'interface de recherche, entrez 'Groupe de sécurité réseau' **(1)**\n 2. Sélectionnez 'Groupe de sécurité réseau' **(2)**\n 3. Cliquez sur 'Créer' **(3)**\n\n   ![NSG](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/NSG.png)\n   \n 4. Entrez le nom du groupe de sécurité réseau **(1)**\n 5. Cliquez sur 'Vérifier + Créer' **(2)**\n\n   ![NSG configuration](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/NSGC.png)\n\n 6. Vous avez ici les règles par défaut affichées **(1)**\n 7. Cliquez sur 'Règles de sécurité de trafic entrant **(2)**\n\n   ![NSG rules](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/NSGRR.png)\n\n 8. Cliquez sur 'Ajouter'**(1)**\n 9. Entrez en source 'Any'**(2)**\n 10. Entrez en plage de port source **(3)**\n 11. Entrez en destination 'Any'**(4)**\n 12. Entrez en Service 'SSH' **(5)**\n 13. Cochez 'Autoriser' **(6)**\n 14. Entrez le nombre pour la priorité **(7)** \n \n ![NSG add port](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/NSGM.png)\n\n> Le choix du nombre pour indiquer la priorité est simple. Plus le nombre est petit, plus il sera traité avant les autres. Les règles de blocages ont des nombres plus grand que ceux qui autorisent.\n\n> La règle ajoutée permet de se connecter à la machine virtuelle en étant hors du réseau Azure. \n\n#####  Création de la Machine Virtuelle\n\n 1. Dans l'onglet de recherche, entrez 'machine virtuelle'**(1)**\n 2. Selectionnez 'Machines Virtuelles' **(2)**\n 3. Cliquez sur 'Créer' **(3)**\n\n   ![VM](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/MV.png)\n\n 4. Ajouter notre Groupe de Ressources**(1)**\n 5. Ajouter le nom de la Machine Virtuelle **(2)**\n 6. Vérifier que la région est bien 'France' ou le pays le plus proche du vôtre **(3)**\n 7. Choisir l'OS de la machine **(4)**\n 8. Choisir la taille en fonction du besoin **(5)**\n 9. Cliquez sur 'Suivant : Disques' \n\n   ![VM configuration](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/MVC11.png)\n\n11. Sélectionnez le type de disque qui vous intéresse **(2)**\n\n   ![VM configuration disk](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/MVCD.png)\n\n12. Au niveau de 'Groupe de sécurité réseau de la carte réseau', cochez 'Paramètres avancés'**(1)**\n13. Selectionner le groupe réseau crée précédemment.\n14. Cliquez sur 'Vérifier + créer'\n         \n![VM configuration réseau](/imgs/posts/2022-02-15-introduction-a-microsoft-azure/MVCN.png)\n\n#####  Connexion à la machine virtuelle\n\nNous allons maintenant vérifier la connexion à la machine virtuelle.\n1. Lors de la création, Azure vous créera une clé. Enregistrez celle-ci et placez-la dans votre répertoire de clé.\n2.  Allez sur 'machine virtuelle' comme vu plus haut, vous verrez votre nouvelle machine. \n3. Sélectionnez votre machine, et copiez votre adresse IP.\n4. Entrez la commande : _ssh -i [votre-clé].pem azureuser@[votre-IP]_\n\n##### Suppresion des ressources\n\nPour terminer ce tutoriel, supprimez vos ressources \n1. Lancez 'Powershell'\n2. Entrez _Az login_\n3. Entrez vos informations de connexion. \n4. Utilisez le script pour supprimer vos ressources une par une (par exemple ici une machine virtuelle).\n```\naz resource delete  \n --resource-group article_eleven \n --name article-eleven-vm  \n --resource-type  \"Microsoft.Compute/virtualMachines\"\n```\n5. Supprimez maintenant votre Groupe de ressources.\n```\naz group delete --name article_eleven\n```\n> Le nom 'azureuser' est le nom par défaut de l'utilisateur de machine virtuelle Azure. Comme nous ne l'avons pas changé pendant notre installation, nous l'utilisons donc.\n\n## Le mot de la fin \n\nVoici un **premier aperçu** de la solution Azure. Nous avons pu voir rapidement l’utilité de la solution, et en quoi elle et son écosystème peuvent être intéressants. Vous avez aussi fait vos premiers pas sur la solution. Si vous cherchez plus d’information, je ne peux que vous rediriger vers la documentation Microsoft sur le sujet. \nDans de prochains articles, nous irons plus loin dans la configuration de la solution et nous verrons les services plus en détail !\n\n\n"}