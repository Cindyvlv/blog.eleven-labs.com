{"date":"2022-01-31T00:00:00.000Z","title":"How To Build Your Website With NextJS","excerpt":"Tutorial on the basics of NextJS for building a website.","readingTime":"12mn","authors":["aamara"],"categories":["javascript"],"content":"\nThis post is about the NextJS basics and a guide to build a simple website with this framework.\n\n## What is NextJS\n\nNextJS is a production-grade React framework. It permits the creation of all kinds of React applications, especially hybrid ones with static (SSG) and server-side components rendering (SSR). It is hostable on multiple hosting types, from a simple web server (for SSG) to a Node.js server for server-side rendering (SSR).\n\nA question come: Why should I use NextJS to create my website?\n\n## Why you should build your website with NextJS\n\nLet’s see a few pros of constructing a website with the NextJS framework:\n\n* React: it is a powerful component-oriented framework to construct a great UI or website. Moreover, if you are a React developer, you will not be lost and be productive on the website development.\n* You can generate static assets and easily host them on a simple HTTP server or in a static host like AWS S3.\n* It is easy to install. All the included developing tools are already configured. You can quickly start your development.\n\nNow, we will learn how to build a website with NextJS. We’ll see the basics of the framework.\n\n## Project example: AstroTeams\n\nLet’s build a website about the astronauts' teams of Eleven Labs.\n\nFirst, install NextJS and start the project.\n\n### NextJS Installation\n\nTo follow this tutorial, you need to clone the git example repository. We will construct the website page and learn how NextJS works. We will not construct the website pages content.\n\nThe repo contains all the components needed to construct the pages content. All reusable components are in `components` folder.\n\nClone the repo and checkout to the get-started branch:\n\n```shell\ngit clone https://gitlab.com/Tonypunisher/astroteams.git\ngit checkout get-started\n```\n\n\n> **Note**: To create a project from scratch, use the create-next-app package.\n> ```shell\n> npx create-next-app astroteams\n> ```\n\n### Create the index page\n\nFirst of all, delete the `pages/index.js` content, to start from a blank page and not with the NextJS welcome page.\nNow, we need to build our website layout, let's create a reusable React component and integrate it in the global NextJS App component to see it in each generated pages.\n\n> **Note**: all website pages are in the `pages` folder.\n\n### Construct a layout\n\nFirst, create a components folder in the root folder:\n\n```shell\nmkdir components\n```\n\nCreate the Layout component folder tree:\n\n```shell\nmkdir components/Layout\ntouch components/Layout/Layout.js\ntouch components/index.js\ntouch components/Layout.module.css\n```\n\nLet's add the Layout HTML code and add some styling to it:\n\n`components/Layout.js`\n```js\n// Libs\nimport PropTypes from \"prop-types\"\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\n\n// Components\nimport { FlexContainer, ORIENTATION } from \"../FlexContainer\";\nimport { ElevenLabsLogo } from \"../ElevenLabsLogo/ElevenLabsLogo\";\nimport { SpaceCraftButton } from \"../SpaceCraftButton\";\n\n// CSS Module\nimport styles from \"./Layout.module.css\";\nimport Image from \"next/image\";\n\nexport function Layout({ children: pageContent }) {\n  const router = useRouter()\n  const isHomePage = router.pathname === \"/\"\n\n  const handleContactClick = (e) => {\n    e.preventDefault()\n    router.push(\"/contact\")\n  }\n\n    return <div className={styles[\"main-container\"]}>\n    <Head>\n      <title>AstroTeams</title>\n      <meta name=\"description\" content=\"Eleven Labs Astro Teams\" />\n      <link rel=\"icon\" href=\"/favicon.ico\" />\n    </Head>\n\n    <main className={styles.main}>\n      <FlexContainer orientation={ORIENTATION.VERTICAL}>\n        <ElevenLabsLogo />\n        { pageContent }\n      </FlexContainer>\n      { isHomePage && <SpaceCraftButton onClick={handleContactClick}>Contact</SpaceCraftButton> }\n    </main>\n\n    <footer className={styles.footer}>\n      <Image\n        alt=\"Eleven Labs Logo\"\n        src=\"/logo-eleven-labs-large.png\"\n        objectFit=\"contain\"\n        width=\"150px\"\n        height=\"50px\"\n        priority\n      />\n      <div className={styles[\"footer__label\"]}>NextJS Demo App</div>\n    </footer>\n  </div>\n}\n\nLayout.propTypes = {\n  /**\n   * Page content\n  */\n  children: PropTypes.node.isRequired,\n}\n```\n\n> **Note**: don't forget to add the styling in the CSS module. Also, export your component in the index.js.\n\nNow, add the component to the `pages/_app.js`:\n\n```js\n// Components\nimport { Layout } from \"../components/Layout\"\n\n// Global CSS\nimport \"../styles/globals.css\"\n\nfunction MyApp({ Component, pageProps }) {\n  return <Layout><Component {...pageProps} /></Layout>\n}\n\nexport default MyApp\n```\n\nNow, each page generated from the pages folder uses the Layout, as we can see in our index page:\n\n![astro teams layout](/imgs/posts/2022-01-26-build-website-with-nextjs/website-layout.png)\n\nLet's add the HTML content for the index page.\n\n### Create the index page content\n\nJust add HTML content with a JSX template to have the page content:\n\n```js\n// Libs\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\n\n// Components\nimport { FlexContainer } from \"../components/FlexContainer\";\nimport { Card } from \"../components/Card/Card\";\nimport { Button } from \"../components/Button\"\n\n// CSS Module\nimport styles from \"../styles/Home.module.css\";\n\nexport default function Home() {\n  const router = useRouter()\n  const handleTeamPageClick = (e, team) => {\n    e.preventDefault()\n    router.push(`/${team}`)\n  }\n\n  return (\n    <>\n      <h2>Eleven Labs Astronauts Teams</h2>\n      <FlexContainer>\n        <Card backgroundColorClass=\"blue-background\" imagePath=\"/cats-logo.png\" imageAlt=\"Eleven Labs Cats Team\" title=\"Schizo Cats\">\n          <div className={styles[\"team-description\"]}>\n            <div className={styles[\"team-description__txt\"]}>Crazy cats from the kitty planet.</div>\n            <Button className=\"blue-background\" onClick={(e) => handleTeamPageClick(e, \"schizo-cats\")}>READ MORE</Button>\n          </div>\n        </Card>\n        <Card backgroundColorClass=\"green-background\" imagePath=\"/ducks-logo.png\" imageAlt=\"Eleven Labs Duck Team\" title=\"Duck Invaders\">\n          <div className={styles[\"team-description\"]}>\n            <div className={styles[\"team-description__txt\"]}>Ducks space invaders from Duck planet.</div>\n            <Button className=\"green-background\" onClick={(e) => handleTeamPageClick(e, \"ducks-invaders\")}>READ MORE</Button>\n          </div>\n        </Card>\n        <Card backgroundColorClass=\"red-background\" imagePath=\"/pandas-logo.png\" imageAlt=\"Eleven Labs Pandas Team\" title=\"Donut Factory\">\n          <div className={styles[\"team-description\"]}>\n            <div className={styles[\"team-description__txt\"]}>Pandas who made some donuts from the Donuts planet.</div>\n            <Button className=\"red-background\" onClick={(e) => handleTeamPageClick(e, \"donuts-factory\")}>READ MORE</Button>\n          </div>\n        </Card>\n        <Card backgroundColorClass=\"yellow-background\" imagePath=\"/racoon-logo.png\" imageAlt=\"Eleven Labs Racoon Team\" title=\"Raccoons of Asgard\">\n          <div className={styles[\"team-description\"]}>\n            <div className={styles[\"team-description__txt\"]}>Racoons guardian of the galaxy from the great Asgard planet.</div>\n            <Button className=\"yellow-background\" onClick={(e) => handleTeamPageClick(e, \"asgard-racoons\")}>READ MORE</Button>\n          </div>\n        </Card>\n      </FlexContainer>\n    </>\n  )\n}\n```\n\n> **Note**: don't forget to add the CSS rules. They are in the `styles/Home.module.css. All CSS modules for pages are in this folder.\n\n![Website Home Page](/imgs/posts/2022-01-26-build-website-with-nextjs/homepage.png)\n\nThe `pages/index.js` and `components/Layout.js` components contain redirections to other website pages, but they don't exist yet. Let's learn how to create these pages with NextJS.\n\n### Create a simple static page\n\nFirst, we need a static page for contact. Static means the page/container doesn't receive any parameter. To create a `/contact` page, add a contact.js file with a React component returning an empty div. NextJS router will automatically create the page:\n\n```shell\ntouch pages/contact.js\n```\n\n`pages/contact.js`:\n```js\n// Components\nimport { PageCard } from \"../components/PageCard\"\nimport { FlexContainer, ORIENTATION } from \"../components/FlexContainer\"\n\nexport default function Contact() {\n    return <>\n    </>\n}\n```\n\nNow we have an empty page for `/contact`. Just add the content and it is done:\n\n```js\n// Components\nimport { PageCard } from \"../components/PageCard\"\nimport { FlexContainer, ORIENTATION } from \"../components/FlexContainer\"\n\nexport default function Contact() {\n    return <>\n        <h2>Contact Eleven Labs</h2>\n        <PageCard>\n            <FlexContainer orientation={ORIENTATION.VERTICAL}>\n                <h3>Eleven Labs</h3>\n                <div>PARIS</div>\n                <div>15, avenue de la Grande Armée</div>\n                <div>75116 PARIS</div>\n                <div><a href=\"mailto:contact@eleven-labs.com\">contact@eleven-labs.com</a></div>\n            </FlexContainer>\n        </PageCard>\n    </>\n}\n```\n\n![Contact Page](/imgs/posts/2022-01-26-build-website-with-nextjs/contactpage.png)\n\nNow we have a contact page. The website needs one page for each astronaut's team. To do that, we will create a route with the team name as a parameter.\n\n### Create a page/route with a parameter\n\nThe NextJS router permits the creation of routes with parameters, like react-router. To do that, we have to create a file with a specific name pattern. To create a `/<teamname>` route, we need to create a `pages/[team].js` file.\n\nNow we have our page with the team name as a parameter. To parse this parameter and pass it as a prop of the page/container, we need to create two functions:\n\n* **getStaticPath**: a function returning all possible static paths for our pages. In our case, it will return an array of four paths, one for each team name.\n* **getStaticProps**: a function returning the props based on the retrieved parameters.\n\nBefore adding these functions, let’s add the dynamic content for each page into a JSON file for our example:\n\n`pages/api/teams.json`:\n```json\n[\n    { \"name\": \"schizo-cats\", \"teamName\": \"Schizo Cats\", \"teamDescription\": \"Crazy cats from the kitty planet.\", \"teamImagePath\": \"/cats-logo.png\", \"teamPlanetPath\": \"/planet-skizo.png\", \"teamCounter\": 25, \"teamPosition\": \"3rd\" },\n    { \"name\": \"ducks-invaders\", \"teamName\": \"Duck Invaders\", \"teamDescription\": \"Ducks space invaders from Duck planet.\", \"teamImagePath\": \"/ducks-logo.png\", \"teamPlanetPath\": \"/planet-ducks.png\", \"teamCounter\": 20, \"teamPosition\": \"2nd\" },\n    { \"name\": \"donuts-factory\", \"teamName\": \"Donut Factory\", \"teamDescription\": \"Pandas who made some donuts from the Donuts planet.\", \"teamImagePath\": \"/pandas-logo.png\", \"teamPlanetPath\": \"/planet-pandas.png\", \"teamCounter\": 25, \"teamPosition\": \"4th\" },\n    { \"name\": \"asgard-racoons\", \"teamName\": \"Raccoons of Asgard\", \"teamDescription\": \"Racoons guardian of the galaxy from the great Asgard planet.\", \"teamImagePath\": \"/racoon-logo.png\", \"teamPlanetPath\": \"/planet-racoon.png\", \"teamCounter\": 20, \"teamPosition\": \"1st\" }\n]\n```\n\nLet’s implement the getStaticPath based on the JSON data:\n\n`pages/[team].js`:\n```js\nexport async function getStaticPaths() {\n    const paths = teamsData.map(team => {\n        return {\n            params: { team: team.name }\n        }\n    })\n\n    return { paths, fallback: false }\n}\n```\n\nThis function parses an array of pathnames based on the teams' names and returns them in an object. We add fallback: false to construct our pages only on the next build phase. If you add a new page, you have to rebuild the website.\n\nNow we can parse the props for the team page:\n\n`pages/[team].js`\n```js\nexport function getStaticProps({ params }) {\n    const { teamName, teamDescription, teamImagePath, teamPlanetPath, teamCounter, teamPosition } = teamsData.find(team => team.name === params.team)\n\n    return { props: { teamName, teamDescription, teamImagePath, teamPlanetPath, teamCounter, teamPosition } }\n}\n```\n\nWe find the content from the JSON file and construct the page props. Now let's create the page content:\n\n`pages/[team].js`:\n```js\nexport default function Team({ teamName, teamDescription, teamImagePath, teamPlanetPath, teamCounter, teamPosition }) {\n    return <TeamCard\n        teamName={teamName}\n        teamDescription={teamDescription}\n        teamImagePath={teamImagePath}\n        teamPlanetPath={teamPlanetPath}\n        teamCounter={teamCounter}\n        teamPosition={teamPosition}\n    />\n}\n```\n\n\nWe pass our props to a component to render the page content. Now if you click on the read more button, you can see a team page:\n\n![Team Page](/imgs/posts/2022-01-26-build-website-with-nextjs/teampage.png)\n\nOur website is finally ready to be published. To conclude this article, let's sum up some feedback about building this website.\n\n## Feedback\n\nHere's what we've learned building this small website:\n\n* Easy to init: the project is super easy to init with create-next-app and is ready to be built and deployed without any additional configurations.\n* Comes with tooling: the project comes with some tooling like pre-configured ESLint configurations or some pre-configured npm scripts. The ESLint configuration can be better but, it is a good starting point.\n* React: It is easy to build with the power of React components if you know it for sure. Moreover, you can build a lot of reusable things across your website. Finally, if you need it, you can also take some React components from npm and use them on your website.\n* Build and deploy: it is easy to build and deploy because with SSG you can deploy your website on any simple HTTP server.\n* Optimization: NextJS automatically make some optimizations on your website loading and your assets to improve performance and also SEO.\n"}